% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
%
% LaTeX Documentation Template - Header File
%
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
% "THE BEER-WARE LICENSE" (Revision 42):
% Hannes Badertscher (hbaderts@hsr.ch) wrote this file. As long as you retain 
% this notice you can do whatever you want with this stuff. If we meet some day, 
% and you think this stuff is worth it, you can buy me a beer in return. 
% - Hannes Badertscher
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %


% Document class and language
\documentclass[
	11pt,               % font size
	final,
	parskip=half,       % half a line skipped between paragraphs
	twoside,	        % two-sided document
	bibliography=totoc,
	listof=totoc
]{scrreprt}           % koma-script report


% Load Packages

	% Basic stuff
	\usepackage[utf8]{inputenc}
	\usepackage[sc]{mathpazo}				% use palatino font!
	\linespread{1.05}        				% palatino needs a bit more space!
	\usepackage[T1]{fontenc}
	
	\usepackage{scrhack}								% fix koma-script incompatibilities
	\usepackage{mparhack}								% important! needed for nice marginpar placement
	\newcommand*{\LangDE}{de}
	\ifx \Lang \LangDE
		\usepackage[english,ngerman]{babel}					% Main language: German
	\else
		\usepackage[ngerman,english]{babel}					% Main language: English
	\fi

	\usepackage[autostyle,german=quotes]{csquotes}		% Swiss quotes: \enquote{}, \textquote{}, \blockquote{}

	\usepackage{geometry}
	\usepackage[komastyle]{scrpage2}		% Custom header and footer
		
	% Colors
	\usepackage{xcolor}
	\usepackage{HSRColors}
												
	% Math
	\usepackage{amsmath}
	\usepackage{amssymb}
	
	% Tables
	\usepackage{multirow}
	\usepackage{multicol}
	\usepackage{tabularx}
	\usepackage{longtable}
	\usepackage{booktabs}
	
	% Figures
	\usepackage{caption}
	\usepackage{subcaption}
	\usepackage{rotating}
	\usepackage{pdfpages}
	\usepackage{epstopdf}
	\usepackage{adjustbox}
	
	% TikZ
	\usepackage{tikz}
	\usetikzlibrary{arrows,backgrounds,fit,positioning,petri,trees}
	\usepackage[american currents]{circuitikz}
	\usepackage{tikz-timing}[2009/12/09]

	% Listings
	\input{header/listings}
	
	% Glossary
	\usepackage[toc]{glossaries}
	
	% Index
	\usepackage{imakeidx}
	\makeindex[intoc,columnseprule]

% % % % % % % % % % % % % %
% Document Setup

	% Author and title of document
	\author{\Author}
	\title{\Title}
	\date{\today}
	
	% page format
	\geometry{
		a4paper,
		twoside,
		top=30mm,
		bottom=30mm,
		left=25mm,
		right=50mm,
		marginparwidth=30mm,
		marginparsep=5mm
	}
		
	% header and footer
	\clearscrheadings
	\clearscrplain
	\clearscrheadfoot
	\renewcommand{\chapterpagestyle}{scrheadings}

	\pagestyle{scrheadings}
	\setheadwidth[0pt]{textwithmarginpar}
	\setfootwidth[0pt]{head}
	\renewcommand{\headfont}{\normalfont\sffamily}
	\renewcommand{\chaptermark}[1]{\markboth{#1}{}}

	\ohead{\leftmark}
	\chead{}
	\ihead{\includegraphics[width=49.5mm]{header/HSR_Logo_A4.jpg}} % minimum allowed size
	\ofoot{\Title}
	\cfoot{\thepage}
	\ifoot{\Author}	

	\setlength{\headheight}{20.5mm}		% because of logo
	\setlength{\textheight}{\textheight-20.5mm}
	\setheadsepline{0.4pt}
	\setfootsepline{0.4pt}

	% PDF information
	\usepackage[
		pdftitle={\Title},
		pdfauthor={\Author},
		pdfsubject={\Subject},
		pdfkeywords={\Keywords},  
		pdflang={\Lang},
		pdfpagemode=UseOutlines,		% Show outlines when opening pdf.
		pdfdisplaydoctitle=true,		% Show document title in pdf viewer.
		pdfcreator={LaTeX with hyperref and KOMA-Script},
		colorlinks=true,
		linkcolor=HSRBlue,
		citecolor=HSRBlue,
		filecolor=HSRBlue,
		urlcolor=HSRBlue,
		bookmarksnumbered=true
	]{hyperref}
	
	% Setup toc and section numbering depth
	\setcounter{tocdepth}{2}
	\setcounter{secnumdepth}{4}
	
	% Number equations, figures, tables within chapters
	\numberwithin{equation}{chapter}
	\numberwithin{figure}{chapter}
	\numberwithin{table}{chapter}
		
	% Place FloatBarrier at every section
	\let\origsection\section							
	\renewcommand*{\section}{\FloatBarrier \origsection}

	% Nicer marginpar placement
	\newcommand*{\oldmarginpar}{}
	\let\oldmarginpar\marginpar
	\renewcommand*{\marginpar}[1]{\leavevmode\oldmarginpar{{\sffamily\normalsize\textcolor{HSRBlue}{#1}}}}